<main>
  <div class="container">
    <div class="content" >
      <h1>Welcome to {{tour.title}}</h1>
      <p class="subtitle">TRAVELAKA đưa bạn đi muôn nơi...</p>

      <div>
        <div class="image ">
          <img class="img-description justify-content-center" [src]="tour.image" alt="ảnh du lịch">

        </div>
        <div class="container mt-3">
          <div class="d-flex justify-content-between align-items-center mb-2">
           </div>

          <div class=" d-flex flex-nowrap  overflow-auto py-3 ms-3 image-list ">
            <div *ngFor="let image of images" class="flex-shrink-0 me-3 image-item" style="width: 200px; height: 200px;">
              <img [src]="image.imageURl"
                   [alt]="image.description"
                   class="img-fluid h-100 w-100 object-fit-cover rounded shadow">
            </div>
          </div>
        </div>
        <!-- Modal trình chiếu ảnh -->
        <div class="modal fade" id="imageGalleryModal" tabindex="-1" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered " style="width: 400px; height: 400px;">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title image-title">Ảnh 1/88</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body text-center">
                <img id="modalImage" src="" class="img-fluid w-100 h-auto object-fit-cover" alt="">
              </div>
              <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-secondary prev-btn">Ảnh trước</button>
                <button type="button" class="btn btn-secondary next-btn">Ảnh sau</button>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="description">
        <p id="" class="mt-5">
         {{tour.description}}
        </p>
      </div>
      <div class="explore-tour">
        <hr>
        <h3>Điểm nhấn:</h3>
        <ul class="hightlight-list">
          <li><strong>Tham quan:</strong> Công Viên Nước Aquatopia - Trải Nghiệm Đi Cáp Treo Vượt Biển - Khám Phá Núi
            San Hô & Rặng san
            hô Bán Nguyệt</li>
          <li><strong>Lưu trú:</strong> Khách sạn chuẩn 4 sao AVS Hotel Phu Quoc</li>
          <li><strong>Ăn uống:</strong> Gỏi cá Trích - Nhum biển nướng</li>
          <li><strong>Hoạt động khác:</strong> Lặn tham quan - Vui chơi tại công viên nước với hơn 100 hoạt động vui
            chơi</li>
        </ul>
        <hr>
        <h3>Lịch trình:</h3>
        <div class="container-itinerary" *ngFor="let itinerary of itinerarys">
          <div class="itinerary d-flex">
            <li> <h6>Ngày {{itinerary.day}}: </h6> {{itinerary.description}}</li>

            <i class="fa-solid fa-chevron-down " (click)="toggle()" ></i>
          </div>
          <div class="itinerary-details" >
            <ul>
              <li>Tới sân bay Phú Quốc, xe đón du khách đưa đoàn về khách sạn gửi hành lý, tự do nghỉ ngơi.</li>
              <li>Ăn trưa đặc sản Phú Quốc với “Gỏi cá Trích” tại nhà hàng và về nhận phòng khách sạn.</li>
              <li>Quý khách khởi hành đi tham quan phía Đông đảo: Vườn tiêu Suối đá - Cơ sở ủ rượu vang Sim - Làng
                chài
                cổ Hàm Ninh - Dinh Bà, Dinh Cậu.</li>
              <li>Quý khách dùng cơm tối và về khách sạn nghỉ ngơi. Tự do dạo bãi biển, thưởng thức không khí yên tĩnh
                tuyệt vời của thành phố biển đảo, có thể tự do đi thăm quan đảo.</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="map-container">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d29800.32851020569!2d105.85517829999999!3d20.990990999999998!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135ac0978ea6dc7%3A0xe5103a9add00b9ed!2zQuG7h25oIHZp4buHbiBUaGFuaCBOaMOgbg!5e0!3m2!1svi!2s!4v1744737997629!5m2!1svi!2s"
                class="map-iframe" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>


<div>

        <h2 class="mb-4">Tour Reviews</h2>

        <!-- Review Filter/Sort Controls -->
        <div class="row mb-4">
          <div class="col-md-6">
            <div class="input-group">
              <select class="form-select" id="ratingFilter">
                <option value="0">All Ratings</option>
                <option value="5">5 Stars</option>
                <option value="4">4 Stars</option>
                <option value="3">3 Stars</option>
                <option value="2">2 Stars</option>
                <option value="1">1 Star</option>
              </select>
              <button class="btn btn-outline-primary" type="button">Filter</button>
            </div>
          </div>
          <div class="col-md-6 text-md-end">
            <select class="form-select d-inline-block w-auto">
              <option>Newest First</option>
              <option>Oldest First</option>
              <option>Highest Rated</option>
              <option>Lowest Rated</option>
            </select>
          </div>
        </div>

        <!-- Reviews List -->
</div>

      <div class="filter-rating mb-3 d-flex align-items-center flex-wrap">
        <label class="me-2">Lọc theo đánh giá:</label>
        <div class="btn-group" role="group">
          <button
            type="button"
            class="btn-choice"
            [class.active]="selectedStar === 0"
            (click)="selectedStar = 0">
            Tất cả
          </button>
          <button
            *ngFor="let star of [5, 4, 3, 2, 1]"
            type="button"
            class="btn-choice"
            [class.active]="selectedStar === star"
            (click)="selectedStar = star">
            {{ star }} ★
          </button>
        </div>
      </div>


      <div class="container-review">
        <div *ngFor="let review of (showAllReviews ? filteredReviews : filteredReviews.slice(0, 2))" class="review-card">
          <div class="d-flex align-items-center">
            <img src="{{ review.avatar }}" class="rounded-circle" alt="User">
            <div class="review-name">
              <strong>{{ review.name }}</strong> <br>
              <span class="review-date">{{ review.date | date:'dd/MM/yyyy' }}</span> <br>
              <span class="rating">{{ review.rating }} ★</span>
            </div>
          </div>
          <p class="mt-2">{{ review.content }}</p>
        </div>
        <!-- Nút để hiển thị thêm hoặc ẩn bớt reviews -->

        <i (click)="toggleReviews()" class="show-reviews d-flex justify-content-center">
          {{ showAllReviews ? 'Ẩn bớt' : 'Hiển thị tất cả' }}
        </i>
      </div>
    </div>
  </div>
      <!-- combo liên quan -->
      <div class="relate-combo d-flex-column">
        <h3 class="mx-auto text-center">COMBO liên quan</h3>
        <div class="product-table row">
          <div class="col-lg-3 col-md-6">
            <div class="product-card">
              <img src="/assets/images/anhProduct.jpg" alt="Product 1">
              <i class="fa-solid fa-location-dot"><a>đảo Phú Quốc</a></i>
              <h2 class="name-product">BIỂN ĐẢO 4N3Đ | PHÚ QUỐC (Khởi hành mỗi ngày)</h2>
              <p class="product-time">4 ngày 3 đêm</p>
              <hr>
              <p class="price">Giá: <del>$250</del> $100</p>
              <div class="product-rating">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-regular fa-star"></i>
              </div>
            </div>
          </div>
        </div>
      </div>



<!-- code bill  -->
    <div class="bill-body" [ngClass]="{'scroll': isScrolled}" #sidebarRef>
      <div class="card p-3 shadow-sm">
        <h3 class="bill-header mb-0">Tour booking</h3>
        <hr>
        <label class="fw-bold">Ngày bắt đầu:</label>
        <div class="input-group mb-3">
          <input type="date" class="form-control" id="start-date" name="start-date" [(ngModel)]="startDate"
            (change)="updateEndDate()">
        </div>

        <label class="fw-bold">Ngày kết thúc:</label>
        <div class="input-group mb-3">
          <input type="text" class="form-control text-center" [value]="endDate ? endDate.toLocaleDateString() : ''"
            readonly>
        </div>

        <p><strong>Thời gian:</strong> 4 ngày 3 đêm</p>
        <hr>

        <p class="mb-1"><strong>Giá vé:</strong></p>

        <!-- Người lớn -->
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span>Người lớn:</span>
          <div class="d-flex align-items-center">
            <button class="btn btn-sm btn-outline-dark" (click)="decreaseAdults()">-</button>
            <span class="mx-2">{{ adults }}</span>
            <button class="btn btn-sm btn-outline-dark" (click)="increaseAdults()">+</button>
          </div>
        </div>
        <div class="text-end fw-bold">{{ (adults * adultPrice) | number }} VNĐ</div>

        <!-- Trẻ em -->
        <div class="d-flex justify-content-between align-items-center">
          <span>Trẻ em:</span>
          <div class="d-flex align-items-center">
            <button class="btn btn-sm btn-outline-dark" (click)="decreaseChildren()">-</button>
            <span class="mx-2">{{ children }}</span>
            <button class="btn btn-sm btn-outline-dark" (click)="increaseChildren()">+</button>
          </div>
        </div>
        <div class="text-end fw-bold">{{ (children * childPrice) | number }} VNĐ</div>
        <hr>
        <p><strong>Tổng tiền:</strong> {{ totalPrice | number }} VNĐ</p>
        <button class="btn btn-info text-white mt-3 w-100" (click)="openModal()">Đặt ngay</button>
      </div>
    </div>


  <!-- Modal Xác Nhận -->
  <div class="modal fade" id="confirmBookingModal" tabindex="-1" aria-labelledby="confirmBookingModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="confirmBookingModalLabel">Xác nhận đặt tour</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Họ tên</label>
            <input type="text" class="form-control" [(ngModel)]="fullName">
          </div>
          <div class="mb-3">
            <label class="form-label">Số điện thoại</label>
            <input type="text" class="form-control" [(ngModel)]="phoneNumber">
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" [(ngModel)]="email">
          </div>
          <div class="mb-3">
            <label class="form-label">Ghi chú</label>
            <textarea class="form-control" [(ngModel)]="notes"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
          <button type="button" class="btn btn-primary" (click)="confirmBooking()">Đồng ý</button>
        </div>
      </div>
    </div>
  </div>
</main>
